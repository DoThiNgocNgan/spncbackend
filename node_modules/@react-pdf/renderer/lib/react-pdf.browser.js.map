{"version":3,"file":"react-pdf.browser.js","sources":["../src/renderer.js","../src/index.js","../src/dom/usePDF.js","../src/dom/PDFViewer.js","../src/dom/BlobProvider.js","../src/dom/PDFDownloadLink.js","../src/dom/index.js"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable no-param-reassign */\n\nimport Reconciler from '@react-pdf/reconciler';\n\nconst createInstance = (type, { style, children, ...props }) => ({\n  type,\n  box: {},\n  style: style || {},\n  props: props || {},\n  children: [],\n});\n\nconst createTextInstance = (text) => ({ type: 'TEXT_INSTANCE', value: text });\n\nconst appendChild = (parentInstance, child) => {\n  const isParentText =\n    parentInstance.type === 'TEXT' ||\n    parentInstance.type === 'LINK' ||\n    parentInstance.type === 'TSPAN';\n  const isChildTextInstance = child.type === 'TEXT_INSTANCE';\n  const isOrphanTextInstance = isChildTextInstance && !isParentText;\n\n  // Ignore orphan text instances.\n  // Caused by cases such as <>{name && <Text>{name}</Text>}</>\n  if (isOrphanTextInstance) {\n    console.warn(\n      `Invalid '${child.value}' string child outside <Text> component`,\n    );\n    return;\n  }\n\n  parentInstance.children.push(child);\n};\n\nconst appendChildToContainer = (parentInstance, child) => {\n  if (parentInstance.type === 'ROOT') {\n    parentInstance.document = child;\n  } else {\n    appendChild(parentInstance, child);\n  }\n};\n\nconst insertBefore = (parentInstance, child, beforeChild) => {\n  const index = parentInstance.children?.indexOf(beforeChild);\n\n  if (index === undefined) return;\n\n  if (index !== -1 && child) parentInstance.children.splice(index, 0, child);\n};\n\nconst removeChild = (parentInstance, child) => {\n  const index = parentInstance.children?.indexOf(child);\n\n  if (index === undefined) return;\n\n  if (index !== -1) parentInstance.children.splice(index, 1);\n};\n\nconst removeChildFromContainer = (parentInstance, child) => {\n  const index = parentInstance.children?.indexOf(child);\n\n  if (index === undefined) return;\n\n  if (index !== -1) parentInstance.children.splice(index, 1);\n};\n\nconst commitTextUpdate = (textInstance, oldText, newText) => {\n  textInstance.value = newText;\n};\n\nconst commitUpdate = (instance, updatePayload, type, oldProps, newProps) => {\n  const { style, ...props } = newProps;\n  instance.props = props;\n  instance.style = style;\n};\n\nconst createRenderer = ({ onChange = () => {} }) =>\n  Reconciler({\n    appendChild,\n    appendChildToContainer,\n    commitTextUpdate,\n    commitUpdate,\n    createInstance,\n    createTextInstance,\n    insertBefore,\n    removeChild,\n    removeChildFromContainer,\n    resetAfterCommit: onChange,\n  });\n\nexport default createRenderer;\n","import FontStore from '@react-pdf/font';\nimport renderPDF from '@react-pdf/render';\nimport PDFDocument from '@react-pdf/pdfkit';\nimport layoutDocument from '@react-pdf/layout';\n\nimport createRenderer from './renderer';\nimport packageJson from '../package.json';\n\nconst { version } = packageJson;\n\nconst fontStore = new FontStore();\n\n// We must keep a single renderer instance, otherwise React will complain\nlet renderer;\n\n// The pdf instance acts as an event emitter for DOM usage.\n// We only want to trigger an update when PDF content changes\nconst events = {};\n\nconst pdf = (initialValue) => {\n  const onChange = () => {\n    const listeners = events.change?.slice() || [];\n    for (let i = 0; i < listeners.length; i += 1) listeners[i]();\n  };\n\n  const container = { type: 'ROOT', document: null };\n  renderer = renderer || createRenderer({ onChange });\n  const mountNode = renderer.createContainer(container);\n\n  const updateContainer = (doc, callback) => {\n    renderer.updateContainer(doc, mountNode, null, callback);\n  };\n\n  if (initialValue) updateContainer(initialValue);\n\n  const render = async (compress = true) => {\n    const props = container.document.props || {};\n    const { pdfVersion, language, pageLayout, pageMode } = props;\n\n    const ctx = new PDFDocument({\n      compress,\n      pdfVersion,\n      lang: language,\n      displayTitle: true,\n      autoFirstPage: false,\n      pageLayout,\n      pageMode,\n    });\n\n    const layout = await layoutDocument(container.document, fontStore);\n    const fileStream = renderPDF(ctx, layout);\n    return { layout, fileStream };\n  };\n\n  const callOnRender = (params = {}) => {\n    if (container.document.props.onRender) {\n      container.document.props.onRender(params);\n    }\n  };\n\n  const toBlob = async () => {\n    const chunks = [];\n    const { layout: _INTERNAL__LAYOUT__DATA_, fileStream: instance } =\n      await render();\n\n    return new Promise((resolve, reject) => {\n      instance.on('data', (chunk) => {\n        chunks.push(\n          chunk instanceof Uint8Array ? chunk : new Uint8Array(chunk),\n        );\n      });\n\n      instance.on('end', () => {\n        try {\n          const blob = new Blob(chunks, { type: 'application/pdf' });\n          callOnRender({ blob, _INTERNAL__LAYOUT__DATA_ });\n          resolve(blob);\n        } catch (error) {\n          reject(error);\n        }\n      });\n    });\n  };\n\n  // TODO: rename this method to `toStream` in next major release, because it return stream not a buffer\n  const toBuffer = async () => {\n    const {\n      layout: _INTERNAL__LAYOUT__DATA_,\n      fileStream,\n    } = await render();\n    callOnRender({_INTERNAL__LAYOUT__DATA_});\n\n    return fileStream;\n  };\n\n  /*\n   * TODO: remove this method in next major release. it is buggy\n   * see\n   * - https://github.com/diegomura/react-pdf/issues/2112\n   * - https://github.com/diegomura/react-pdf/issues/2095\n   */\n  const toString = async () => {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(\n        '`toString` is deprecated and will be removed in next major release',\n      );\n    }\n\n    let result = '';\n    const { fileStream: instance } = await render(false); // For some reason, when rendering to string if compress=true the document is blank\n\n    return new Promise((resolve, reject) => {\n      try {\n        instance.on('data', (buffer) => {\n          result += buffer;\n        });\n\n        instance.on('end', () => {\n          callOnRender();\n          resolve(result);\n        });\n      } catch (error) {\n        reject(error);\n      }\n    });\n  };\n\n  const on = (event, listener) => {\n    if (!events[event]) events[event] = [];\n    events[event].push(listener);\n  };\n\n  const removeListener = (event, listener) => {\n    if (!events[event]) return;\n    const idx = events[event].indexOf(listener);\n    if (idx > -1) events[event].splice(idx, 1);\n  };\n\n  return {\n    on,\n    container,\n    toBlob,\n    toBuffer,\n    toString,\n    removeListener,\n    updateContainer,\n  };\n};\n\nconst Font = fontStore;\n\nconst StyleSheet = {\n  create: (s) => s,\n};\n\nexport { version, Font, StyleSheet, pdf, createRenderer };\n","/* eslint-disable no-console */\n\nimport queue from 'queue';\nimport { useState, useRef, useEffect, useCallback } from 'react';\n\nimport { pdf } from '../index';\n\n/**\n * PDF hook\n *\n * @param {Object} [options] hook options\n * @returns {[Object, Function]} pdf state and update function\n */\nexport const usePDF = ({ document } = {}) => {\n  const pdfInstance = useRef(null);\n\n  const [state, setState] = useState({\n    url: null,\n    blob: null,\n    error: null,\n    loading: !!document,\n  });\n\n  // Setup rendering queue\n  useEffect(() => {\n    const renderQueue = queue({ autostart: true, concurrency: 1 });\n\n    const queueDocumentRender = () => {\n      setState((prev) => ({ ...prev, loading: true }));\n\n      renderQueue.splice(0, renderQueue.length, () =>\n        state.error ? Promise.resolve() : pdfInstance.current.toBlob(),\n      );\n    };\n\n    const onRenderFailed = (error) => {\n      console.error(error);\n      setState((prev) => ({ ...prev, loading: false, error }));\n    };\n\n    const onRenderSuccessful = (blob) => {\n      setState({\n        blob,\n        error: null,\n        loading: false,\n        url: URL.createObjectURL(blob),\n      });\n    };\n\n    pdfInstance.current = pdf();\n    pdfInstance.current.on('change', queueDocumentRender);\n    if (document) {\n      pdfInstance.current.updateContainer(document);\n    }\n\n    renderQueue.on('error', onRenderFailed);\n    renderQueue.on('success', onRenderSuccessful);\n\n    return () => {\n      renderQueue.end();\n      pdfInstance.current.removeListener('change', queueDocumentRender);\n    };\n  }, []);\n\n  // Revoke old unused url instances\n  useEffect(() => {\n    return () => {\n      if (state.url) {\n        URL.revokeObjectURL(state.url);\n      }\n    };\n  }, [state.url]);\n\n  const update = useCallback((newDoc) => {\n    pdfInstance.current.updateContainer(newDoc);\n  }, []);\n\n  return [state, update];\n};\n\nexport default usePDF;\n","/* eslint-disable no-console */\n/* eslint-disable react/jsx-props-no-spreading */\n\nimport { useEffect } from 'react';\n\nimport usePDF from './usePDF';\n\nexport const PDFViewer = ({\n  title,\n  style,\n  className,\n  children,\n  innerRef,\n  showToolbar = true,\n  ...props\n}) => {\n  const [instance, updateInstance] = usePDF();\n\n  useEffect(() => updateInstance(children), [children]);\n\n  const src = instance.url\n    ? `${instance.url}#toolbar=${showToolbar ? 1 : 0}`\n    : null;\n\n  return (\n    <iframe\n      src={src}\n      title={title}\n      ref={innerRef}\n      style={style}\n      className={className}\n      {...props}\n    />\n  );\n};\n\nexport default PDFViewer;\n","/* eslint-disable no-console */\n\nimport { useEffect } from 'react';\n\nimport usePDF from './usePDF';\n\nexport const BlobProvider = ({ document: doc, children }) => {\n  const [instance, updateInstance] = usePDF();\n\n  useEffect(() => updateInstance(doc), [doc]);\n\n  if (!doc) {\n    console.warn('You should pass a valid document to BlobProvider');\n    return null;\n  }\n\n  return children(instance);\n};\n\nexport default BlobProvider;\n","/* eslint-disable no-console */\n\nimport { useEffect } from 'react';\n\nimport usePDF from './usePDF';\n\nexport const PDFDownloadLink = ({\n  fileName = 'document.pdf',\n  document: doc,\n  children,\n  onClick,\n  href: _filteredOutHref,\n  ...rest\n}) => {\n  const [instance, updateInstance] = usePDF();\n\n  useEffect(() => updateInstance(doc), [doc]);\n\n  if (!doc) {\n    console.warn('You should pass a valid document to PDFDownloadLink');\n    return null;\n  }\n\n  const handleDownloadIE = () => {\n    if (instance && window.navigator.msSaveBlob) {\n      // IE\n      window.navigator.msSaveBlob(instance.blob, fileName);\n    }\n  };\n\n  const handleClick = (event) => {\n    handleDownloadIE();\n    if (typeof onClick === 'function') onClick(event, instance);\n  };\n\n  return (\n    <a href={instance.url} download={fileName} onClick={handleClick} {...rest}>\n      {typeof children === 'function' ? children(instance) : children}\n    </a>\n  );\n};\n\nexport default PDFDownloadLink;\n","import * as primitives from '@react-pdf/primitives';\n\nimport usePDF from './usePDF';\nimport PDFViewer from './PDFViewer';\nimport BlobProvider from './BlobProvider';\nimport PDFDownloadLink from './PDFDownloadLink';\nimport { pdf, version, Font, StyleSheet } from '../index';\n\nconst throwEnvironmentError = (name) => {\n  throw new Error(\n    `${name} is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.`,\n  );\n};\n\nexport const renderToStream = () => {\n  throwEnvironmentError('renderToStream');\n};\n\nexport const renderToBuffer = () => {\n  throwEnvironmentError('renderToBuffer');\n};\n\nexport const renderToString = () => {\n  throwEnvironmentError('renderToString');\n};\n\nexport const renderToFile = () => {\n  throwEnvironmentError('renderToFile');\n};\n\nexport const render = () => {\n  throwEnvironmentError('render');\n};\n\nexport * from '../index';\n\nexport * from './usePDF';\n\nexport * from './PDFViewer';\n\nexport * from './BlobProvider';\n\nexport * from './PDFDownloadLink';\n\nexport * from '@react-pdf/primitives';\n\n// TODO: remove this default export in next major release because it breaks tree-shacking\nexport default {\n  pdf,\n  usePDF,\n  Font,\n  version,\n  StyleSheet,\n  PDFViewer,\n  BlobProvider,\n  PDFDownloadLink,\n  renderToStream,\n  renderToString,\n  renderToFile,\n  render,\n  ...primitives,\n};\n"],"names":["createInstance","type","_ref","style","children","props","box","createTextInstance","text","value","appendChild","parentInstance","child","isParentText","isChildTextInstance","isOrphanTextInstance","console","warn","push","appendChildToContainer","document","insertBefore","beforeChild","_parentInstance$child","index","indexOf","undefined","splice","removeChild","_parentInstance$child2","removeChildFromContainer","_parentInstance$child3","commitTextUpdate","textInstance","oldText","newText","commitUpdate","instance","updatePayload","oldProps","newProps","createRenderer","_ref2","onChange","Reconciler","resetAfterCommit","version","packageJson","fontStore","FontStore","renderer","events","pdf","initialValue","_events$change","listeners","change","slice","i","length","container","mountNode","createContainer","updateContainer","doc","callback","render","compress","pdfVersion","language","pageLayout","pageMode","ctx","PDFDocument","lang","displayTitle","autoFirstPage","layout","layoutDocument","fileStream","renderPDF","callOnRender","params","onRender","toBlob","chunks","_INTERNAL__LAYOUT__DATA_","Promise","resolve","reject","on","chunk","Uint8Array","blob","Blob","error","toBuffer","toString","process","env","NODE_ENV","result","buffer","event","listener","removeListener","idx","Font","StyleSheet","create","s","usePDF","_temp","pdfInstance","useRef","state","setState","useState","url","loading","useEffect","renderQueue","queue","autostart","concurrency","queueDocumentRender","prev","current","onRenderFailed","onRenderSuccessful","URL","createObjectURL","end","revokeObjectURL","update","useCallback","newDoc","PDFViewer","title","className","innerRef","showToolbar","updateInstance","src","_jsx","ref","BlobProvider","PDFDownloadLink","fileName","onClick","href","_filteredOutHref","rest","handleDownloadIE","window","navigator","msSaveBlob","handleClick","download","throwEnvironmentError","name","Error","renderToStream","renderToBuffer","renderToString","renderToFile","primitives"],"mappings":"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"}