import*as e from"@react-pdf/primitives";export*from"@react-pdf/primitives";import t from"fs";import{Buffer as r}from"buffer";import o from"@react-pdf/font";import n from"@react-pdf/render";import i from"@react-pdf/pdfkit";import a from"@react-pdf/layout";import c from"@react-pdf/reconciler";const s=(e,t)=>{let{style:r,children:o,...n}=t;return{type:e,box:{},style:r||{},props:n||{},children:[]}},d=e=>({type:"TEXT_INSTANCE",value:e}),l=(e,t)=>{const r="TEXT"===e.type||"LINK"===e.type||"TSPAN"===e.type;"TEXT_INSTANCE"!==t.type||r?e.children.push(t):console.warn(`Invalid '${t.value}' string child outside <Text> component`)},p=(e,t)=>{"ROOT"===e.type?e.document=t:l(e,t)},f=(e,t,r)=>{var o;const n=null===(o=e.children)||void 0===o?void 0:o.indexOf(r);void 0!==n&&-1!==n&&t&&e.children.splice(n,0,t)},m=(e,t)=>{var r;const o=null===(r=e.children)||void 0===r?void 0:r.indexOf(t);void 0!==o&&-1!==o&&e.children.splice(o,1)},u=(e,t)=>{var r;const o=null===(r=e.children)||void 0===r?void 0:r.indexOf(t);void 0!==o&&-1!==o&&e.children.splice(o,1)},v=(e,t,r)=>{e.value=r},h=(e,t,r,o,n)=>{const{style:i,...a}=n;e.props=a,e.style=i},y=e=>{let{onChange:t=(()=>{})}=e;return c({appendChild:l,appendChildToContainer:p,commitTextUpdate:v,commitUpdate:h,createInstance:s,createTextInstance:d,insertBefore:f,removeChild:m,removeChildFromContainer:u,resetAfterCommit:t})};var g={name:"@react-pdf/renderer",version:"4.0.2",license:"MIT",description:"Create PDF files on the browser and server",author:"Diego Muracciole <diegomuracciole@gmail.com>",homepage:"https://github.com/diegomura/react-pdf#readme",type:"module",main:"./lib/react-pdf.js",browser:{"./lib/react-pdf.js":"./lib/react-pdf.browser.js"},repository:{type:"git",url:"https://github.com/diegomura/react-pdf.git",directory:"packages/renderer"},scripts:{build:"rimraf ./lib && rollup -c",watch:"rimraf ./lib && rollup -c -w",size:"size-limit",lint:"eslint src",test:"vitest && vitest --config vitest.browser.config.js"},dependencies:{"@babel/runtime":"^7.20.13","@react-pdf/font":"^3.0.0","@react-pdf/layout":"^4.1.0","@react-pdf/pdfkit":"^4.0.0","@react-pdf/primitives":"^4.0.0","@react-pdf/reconciler":"^1.0.1","@react-pdf/render":"^4.0.0","@react-pdf/types":"^2.7.0",events:"^3.3.0","object-assign":"^4.1.1","prop-types":"^15.6.2",queue:"^6.0.1",scheduler:"^0.17.0"},peerDependencies:{react:"^16.8.0 || ^17.0.0 || ^18.0.0"},"lint-staged":{"*.js":["yarn lint","prettier --write"]},files:["lib","index.d.ts"],collective:{type:"opencollective",url:"https://opencollective.com/react-pdf",logo:"https://opencollective.com/opencollective/logo.txt"},devDependencies:{"@size-limit/preset-big-lib":"^11.0.1",assert:"^2.0.0","browserify-zlib":"^0.2.0",buffer:"^6.0.3",process:"^0.11.10","size-limit":"^11.0.1",util:"^0.12.4"}};const{version:b}=g,w=new o;let T;const D={},P=e=>{const t={type:"ROOT",document:null};T=T||y({onChange:()=>{var e;const t=(null===(e=D.change)||void 0===e?void 0:e.slice())||[];for(let e=0;e<t.length;e+=1)t[e]()}});const r=T.createContainer(t),o=(e,t)=>{T.updateContainer(e,r,null,t)};e&&o(e);const c=async function(e){void 0===e&&(e=!0);const r=t.document.props||{},{pdfVersion:o,language:c,pageLayout:s,pageMode:d}=r,l=new i({compress:e,pdfVersion:o,lang:c,displayTitle:!0,autoFirstPage:!1,pageLayout:s,pageMode:d}),p=await a(t.document,w);return{layout:p,fileStream:n(l,p)}},s=function(e){void 0===e&&(e={}),t.document.props.onRender&&t.document.props.onRender(e)};return{on:(e,t)=>{D[e]||(D[e]=[]),D[e].push(t)},container:t,toBlob:async()=>{const e=[],{layout:t,fileStream:r}=await c();return new Promise(((o,n)=>{r.on("data",(t=>{e.push(t instanceof Uint8Array?t:new Uint8Array(t))})),r.on("end",(()=>{try{const r=new Blob(e,{type:"application/pdf"});s({blob:r,_INTERNAL__LAYOUT__DATA_:t}),o(r)}catch(e){n(e)}}))}))},toBuffer:async()=>{const{layout:e,fileStream:t}=await c();return s({_INTERNAL__LAYOUT__DATA_:e}),t},toString:async()=>{"development"===process.env.NODE_ENV&&console.warn("`toString` is deprecated and will be removed in next major release");let e="";const{fileStream:t}=await c(!1);return new Promise(((r,o)=>{try{t.on("data",(t=>{e+=t})),t.on("end",(()=>{s(),r(e)}))}catch(e){o(e)}}))},removeListener:(e,t)=>{if(!D[e])return;const r=D[e].indexOf(t);r>-1&&D[e].splice(r,1)},updateContainer:o}},S=w,_={create:e=>e},A=async e=>{const t=P(e);return await t.toBuffer()},C=async(e,r,o)=>{const n=await A(e),i=t.createWriteStream(r);return n.pipe(i),new Promise(((e,t)=>{i.on("finish",(()=>{o&&o(n,r),e(n)})),i.on("error",t)}))},N=e=>A(e).then((e=>new Promise(((t,o)=>{const n=[];e.on("data",(e=>n.push(e))),e.on("end",(()=>t(r.concat(n)))),e.on("error",(e=>o(e)))})))),x=e=>("development"===process.env.NODE_ENV&&console.warn("`renderToString` is deprecated and will be removed in next major release, use `renderToBuffer` instead"),N(e).then((e=>e.toString()))),E=e=>{throw new Error(`${e} is a web specific API. You're either using this component on Node, or your bundler is not loading react-pdf from the appropriate web build.`)},O=()=>{E("usePDF")},F=()=>{E("PDFViewer")},I=()=>{E("PDFDownloadLink")},L=()=>{E("BlobProvider")},j=C;var B={pdf:P,Font:S,version:b,StyleSheet:_,usePDF:O,PDFViewer:F,BlobProvider:L,PDFDownloadLink:I,renderToStream:A,renderToString:x,renderToFile:C,render:j,...e};export{L as BlobProvider,S as Font,I as PDFDownloadLink,F as PDFViewer,_ as StyleSheet,y as createRenderer,B as default,P as pdf,j as render,N as renderToBuffer,C as renderToFile,A as renderToStream,x as renderToString,O as usePDF,b as version};
